[#creating-a-cluster-proxy]
= Creating a cluster in a proxy environment

You can create a {ocp} cluster when your hub cluster is connected through a proxy server. One of the following situations must be true for the cluster creation to succeed:

* {mce-short} has a private network connection with the managed cluster that you are creating, with managed cluster access to the Internet by using a proxy.

* The managed cluster is on a infrastructure provider, but the firewall ports enable communication from the managed cluster to the hub cluster.

To create a cluster that is configured with a proxy, complete the following steps:

. Configure the `cluster-wide-proxy` setting on the hub cluster by adding the following information to your `install-config.yaml` file:
+
[source,yaml]
----
apiVersion: v1
kind: Proxy
baseDomain: <domain>
proxy:
  httpProxy: http://<username>:<password>@<proxy.example.com>:<port>
  httpsProxy: https://<username>:<password>@<proxy.example.com>:<port>
  noProxy: <wildcard-of-domain>,<provisioning-network/CIDR>,<BMC-address-range/CIDR>
----
+
Replace `username` with the username for your proxy server.
+
Replace `password` with the password to access your proxy server.
+
Replace `proxy.example.com` with the path of your proxy server.
+
Replace `port` with the communication port with the proxy server.
+
Replace `wildcard-of-domain` with an entry for domains that should bypass the proxy.
+ 
Replace `provisioning-network/CIDR` with the IP address of the provisioning network and the number of assigned IP addresses, in CIDR notation.
+
Replace `BMC-address-range/CIDR` with the BMC address and the number of addresses, in CIDR notation.
+
After you add the previous values, the settings are applied to your clusters. 

. Provision the cluster by completing the procedure for creating a cluster. See xref:../cluster_lifecycle/create_intro.adoc#creating-a-cluster[Creating a cluster] to select your provider.

