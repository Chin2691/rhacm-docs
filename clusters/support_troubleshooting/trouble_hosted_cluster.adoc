[#trouble-hosted-cluster]
= Troubleshooting a hosted cluster

If you experience issues with a hosted cluster, you can gather information to help you with troubleshooting.

[#trouble-hosted-cluster-symptom-must-gather]
== Symptom: Problems creating a hosted cluster



[#trouble-hosted-cluster-resolve-must-gather]
== Resolving the problem: Collect must-gather information 

. Enter the following command to collect information about the hosted cluster. In the command, the `hosted-cluster-namespace=HOSTEDCLUSTERNAMESPACE` parameter is optional; if you do not include it, the command runs as though the hosted cluster is in the default namespace, which is `clusters`.

+
----
oc adm must-gather --image=quay.io/stolostron/backplane-must-gather:SNAPSHOTNAME /usr/bin/gather hosted-cluster-namespace=HOSTEDCLUSTERNAMESPACE hosted-cluster-name=HOSTEDCLUSTERNAME 
----

. To save the results of the command to a directory, use the `--dest-dir=NAME` parameter and create a compressed file:

+
----
oc adm must-gather --image=quay.io/stolostron/backplane-must-gather:SNAPSHOTNAME /usr/bin/gather hosted-cluster-namespace=HOSTEDCLUSTERNAMESPACE hosted-cluster-name=HOSTEDCLUSTERNAME --dest-dir=NAME ; tar -cvzf NAME.tgz NAME
----

The `must-gather` command detects whether it is being run in a backplane operator location or in a managed cluster, and collects data accordingly.

If you run the command on the Open Cluster Management Hub Server, the command captures a list of managed clusters and their status. This information is in the `gather-managed.log` file. If a managed cluster reports a status that is not ready when you expect it to be ready, run the `must-gather` command on the managed cluster.

The data is organized in two levels:

* By cluster-scoped resources
* By resources that belong to namespaces

Within each level, the data is further organized by API group for the custom resource definitions.

The following information is also provided:

* The kind of each custom resource definition
* The YAML for each of the custom resources
* The output of the `kubectl get pods -n $NAMESPACE-IN-WHICH-OCM-RUNS-ON-HUB` command
* The list of namespaces in the collected data, and the output of the namespaces
* The list of pods that run in each namespace. If a namespace does not contain pods, no pods are displayed
* 