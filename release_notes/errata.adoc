[#errata-updates]
= Errata updates

By default, Errata updates are automatically applied when released. See link:../install/upgrade_hub.adoc#upgrading-by-using-the-operator[Upgrading by using the operator] for more information.

*Important:* For reference, link:https://access.redhat.com/errata/#/[Errata] links and GitHub numbers might be added to the content and used internally. Links that require access might not be available for the user.

== Errata 2.1.8

View a summarized list of {product-title} Errata 2.1.8 updates:

* *Important:* You must run {ocp} version 4.6, or later, to upgrade to {product-title-short} version 2.1.7 and 2.1.8. If you cannot upgrade your {ocp} version 4.5 to a later version, you can continue to use {product-title-short} version 2.1.6.

* Resolves the issue with Observability `thanos-store-shard` pods in `crashloopback` state after upgrade to {ocp} 4.6.30. (GitHub 13081)

* Fixed an issue with `placementrule` and `placementbinding` not deleted when user deletes a disabled policy in the console. (GitHub 12689)

* Updated Search code to use data from other fields as a result of Kubernetes selfLink removal, which impacted Search logic that depended on those fields. (GitHub 12701)

== Errata 2.1.7

View a summarized list of {product-title} Errata 2.1.7 updates:

* *Important:* You must run {ocp} version 4.6, or later, to upgrade to {product-title-short} version 2.1.7. If you cannot upgrade your {ocp} version 4.5 to a later version, you can continue to use {product-title-short} version 2.1.6.

* Fixed an issue that caused the Hive controller log to show the incorrect version information. (GitHub 12014)

* Added authorization for users with `view` permissions to create and delete the `ManagedClusterView` resource, which also enables users with `view` permissions to view the YAML file of the managed cluster resources. (GitHub 11243)

* Enabled users with a `cluster-manager-admin` role binding to run create, update, and delete operations on the `clusterimagesets` resource. This change allows a user with `cluster-manager-admin` privileges to provision clusters with {product-title-short}. (GitHub 11596)

== Errata 2.1.6

View a summarized list of {product-title} Errata 2.1.6 updates:

* Updated the list of available Red Hat OpenShift Container Platform release ClusterImageSets when creating a new cluster. (GitHub 10760)

* Added quotation marks to the generated import command to avoid possible errors when the command is run. (https://bugzilla.redhat.com/show_bug.cgi?id=1934184[Bugzilla 1934184])(GitHub 9983)

== Errata 2.1.5

*Note:* {ocp-short} version 4.7 is not supported on bare metal. You cannot create bare metal managed clusters with the {product-title-short} hub cluster when the hub cluster is hosted on {ocp-short} version 4.7.

* Fixed log errors that occurred when `packageOverrides` was incorrectly specified in a subscription CR. Errors are now logged correctly and the incorrect `packageOverrides` specifications are ignored. (GitHub 10008)

* Updated the list of Azure regions that are available for adding a cluster. https://bugzilla.redhat.com/show_bug.cgi?id=1932430[Bugzilla 1932430]

* Fixed an issue that caused the _Application topology_ page to display an unexpected error. (GitHub 9377)

* Fixed an issue with hub cluster subscription crashing when a Helm subscription is used to subscribe resources from a private Helm channel with only `spec.SecretRef` defined. Now the hub cluster subscription does not crash for this type of Helm subscription. The private Helm repository channel secret must be defined in the same channel namespace. https://bugzilla.redhat.com/show_bug.cgi?id=1932430[Bugzilla 1932430]

* Fixed duplicate Ansible prehook and posthook jobs that were created. Now only one Ansible prehook and posthook job is created and executed by application subscriptions. (https://bugzilla.redhat.com/show_bug.cgi?id=1920654[Bugzilla 1920654])

* Updates to the _Overview_ page to include resources from the hub cluster (local-cluster). (https://bugzilla.redhat.com/show_bug.cgi?id=1903446[Bugzilla 1903446])


== Errata 2.1.4

Updated selected containers in the images.

== Errata 2.1.3

View a summarized list of {product-title} Errata 2.1.3 updates:

* Fixed panic error in `multicluster-operators-hub` pod so that `appsub` deploys successfully (link:https://bugzilla.redhat.com/show_bug.cgi?id=1921531[Bugzilla 1921531]).

* Fixed an issue with managed clusters that were created on VMware and did not use the values that were provided for worker pool CPU, memory, or disk size. (GitHub 8930)

* Fixed certificate policy controller not detecting created or deleted namespaces that match the selector in the policy. (GitHub 7639)

* Fixed Grafana ClusterRoleBinding object failure. (GitHub 7621)

* Fixed configuration policy controller crash when handling policies. (GitHub 7569)

* Fixed missing namespace when editing an existing provider connection. (GitHub 7501)

* Fixed routing issues in policy pages to show `No resource` instead of a loading animation when users navigate to a URL for a policy that does not exist. (GitHub 7445)

* Fixed issue with policy editor crashing when content was copied, pasted, and fixed an error in `.spec.policyTemplate` when the form did not update to display that there was a custom specification. (GitHub 7380)

* Added channel connection failure message, which can be found in the subscription status. (GitHub 7177)

* Excluded channels from removable application resources, which were listed in _Delete application_ modal in the console. Now channels cannot be deleted in this modal. Only subscriptions and placement rules are removable in this modal with this fix. (GitHub 7153)

* Fixed display of NIST categories, standards, and controls for consistency across all policy elements and adjusted to NIST content. (GitHub 6954)

* Increased the search pod memory requests and limits in default install to handle most workloads without intervention: Memory limit for Search `redisgraph` pod to 4GB,
memory request for Search API and Redisgraph pods to 128MB. (GitHub 6890)

* Fixed failure with Git channel connection to a private Git repository with missing `secretRef` leading to `multicluster-operators-hub-subscription` pod crash. (GitHub 8764)

* Fixed `cert-manager-webhook` failure to start because of permission problems with {ocp-short} 4.6.10 installation. (GitHub 8517)

* Fixed a high availability configuration running too many competing compactors so that with the fix, there is only one compactor running. (GitHub 7676)

* Fixed a potential performance issue where some Grafana dashboards auto-refresh with an interval that was smaller than the metrics scrape interval. (GitHub 7665)

* Added support to import Red Hat OpenShift on IBM Cloud cluster to manage. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1894778[Bugzilla 1894778])

* Fixed Git webhook notification function to deploy the selected Git repository resources to target clusters through a subscription. (GitHub 6785)

* Fixed an issue with Application topology resources that deploy successfully but are not accessible offline. Now the cluster node displays a failed status if any remote clusters are offline. (GitHub 6298)

== Errata 2.1.2

View a summarized list of {product-title} Errata 2.1.2 updates:

* Fixed an issue that caused the hub cluster to deny renewal requests for a registration agent certificate, which resulted in some registration agents going offline after one month. (GitHub 5628) 

* Fixed an issue that caused a conflict between some cluster image sets when {product-title-short} was upgraded. (GitHub 7527)

* Fixed an issue that caused some certificates to be removed during upgrading. (GitHub 7533)

== Errata 2.1.1

View a summarized list of {product-title-short} Errata 2.1.1 updates:

* Updated the `certificate` and `iam` policy controllers to fix an issue that prevented them from correctly maintaining the history of policy violations. (GitHub 6014)

* Increased VMware managed cluster default worker node values (4 CPU, 2 core, 16384 MB memory) to align with other providers. (GitHub 6206)

* Fixed an issue that caused a temporary error on the create resources page after you detach a managed cluster. (GitHub 6299)

* Fixed an issue in which the *Merge updates* option changed to `unset` after closing, modifying, and reopening an application. (GitHub 6349)

* Fixed an issue that prevented the complete clean up of a Microsoft Azure managed cluster after the addition of the cluster failed. (GitHub 6353)

* Fixed an issue that prevented the application topology from displaying the correct resource nodes after it deployed a `helm` type application to `local-cluster`. The application topology now displays all types of applications. (GitHub 6400)

* Application subscriptions: Enabled the `packageOverrides` YAML content for the Git `kustomization.yaml` file to use the path that is identified in the annotation of the subscription by default. (GitHub 6476)

* Fixed an issue that prevented subscription overrides from working when multiple subscriptions shared the same Git channel with the same branch. (GitHub 6476)

* Fixed an issue where policies using the `musthave` compliance type on a list of objects behaved similarly to the `mustonlyhave` compliance type. You can now specify as few as one field in a list of objects, and a `musthave` policy marks it as compliant as long as one object in the list has a field that matches the one specified in the policy. (GitHub 6492)

* Resolved an issue that configures all Thanos receivers so that every time-series stores 3 copies. It also ensures that every time-series is successfully written to at least 2 Thanos receivers in the target hashring. (GitHub 6547)

* Fixed an issue that caused the `merge update` setting to clear after selecting the setting when creating the application with the *Create* wizard , then opening it in an editor. (GitHub 6554)

* Fixed an issue that caused policies to display a `noncompliant` status. (GitHub 6630)

* Fixed an issue that occurred when the Git webhook was enabled on channel and subscription, but the subscribed resources were not applied to the target clusters. (GitHub 6785)

* Resolved an issue that can cause the `create resource` command to fail with a `Forbidden` error on the first load. (GitHub 6798)

* Exposed the following additional metrics with the {product-title-short} observability components for persistent volumes:

** `kubelet_volume_stats_available_bytes`
** `kubelet_volume_stats_capacity_bytes`
** `kube_persistentvolume_status_phase`
+
These metrics are not explicitly exposed in any dashboards or alert rules, but you can query them and set custom alert rules for them. (GitHub 6891)

* Fixed selection and deleselection inconsistencies when creating a new Policy. (GitHub 6897)

* Fixed an issue that caused bare metal clusters to fail to upgrade to 2.1.0 due to memory errors. (GitHub 6898) (link:https://bugzilla.redhat.com/show_bug.cgi?id=1895799[Bugzilla 1895799])

* Fixed an issue that required a pull secret in the `open-cluster-management-observability` namespace to successfully install the observability components. With this change, you are not required to create a pull secret to install the observability components. (GitHub 6911)

* Fixed an issue that caused the Governance and risk dashboard to take a long time to load. (GitHub 6925)

* Corrected a PATH error when starting a new Visual Web Terminal session. (GitHub 6928)

* Fixed a possible timing issue of the observability components in managed clusters changing to use incorrect images when the observability operator is restarted at runtime. (GitHub 6942)

* Added instructions for applying a fix to work around a failed application creation from a private Git repository. (GitHub 6952) (link:https://bugzilla.redhat.com/show_bug.cgi?id=1896341[Bugzilla 1896341])

* Fixed an issue that prevented the `klusterlet-addon-controller` from being recognized when it is in a namespace other than the `open-cluster-management` namespace. (GitHub 6986)

* Fixed an issue that caused the configuration policy controller to crash when an object template checked a field for a list, but found something set to that field that is not the expected list. (GitHub 7135)

* Fixed an issue in which the template editor YAML filters out the placementRule `status: 'True'` setting when making changes to an application deployed on all online clusters.
+
If you manually enter `status: 'True'` in the YAML editor for the placementRule before saving the updated application, the setting is retained. (GitHub 7152)

* Completed other general changes and bug fixes to code and documentation that are not listed.
