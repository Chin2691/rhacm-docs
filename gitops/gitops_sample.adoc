[#repo-git-ops]
= GitOps sample directory

Learn best practices for organizing a Git repository to manage clusters.

Folders in this example are defined and named, with each folder containing applications or configurations that are run on managed clusters:

 - Root folder `managed-subscriptions`: Contains subscriptions that target the `common-managed` folder.
 - Subfolder `apps/`: Used to subscribe applications in the `common-managed` folder with placement to `managed-clusters`.
 - Subfolder `config/`: Used to subscribe configurations in the `common-managed` folder with placement to `managed-clusters`.
 - Subfolder `policies/`: Used to apply policies with placement to `managed-clusters`.
 - Folder `root-subscription/`: The initial subscription for the hub cluster that subscribes the `managed-subscriptions` folder.

See the example of a directory:

[source,yaml]
----
common-managed/             
    apps/
      app-name-0/
      app-name-1/
    config/
      config001/
      config002/

managed-subscriptions      
    apps/                  
    config/                
    policies/              

root-subscription/         
----

[#gitops-subscription-flow]
== GitOps flow

Your directory structure is created for the following subscription flow: `root-subscription` > `managed-subscriptions` > `common-managed`.

. A single subscription in `root-subscription/` is applied from the CLI terminal to the hub cluster. 

. Subscriptions and policies are downloaded and applied to the hub cluster from the `managed-subscription` folder.

 - The subscriptions and policies in the `managed-subscription` folder then perform work on the managed clusters based on the placement. 
 - Placement determines which `managed-clusters` each subscription or policy affects.  
 - The subscriptions or policies define what is on the clusters that match their placement.