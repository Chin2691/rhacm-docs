[#troubleshooting-klusterlet-with-degraded-conditions]
= Troubleshooting klusterlet with degraded conditions

The Klusterlet degraded conditions can help to diagnose the status of Klusterlet agents on managed cluster. If a Klusterlet is in the degraded condition, the Klusterlet agents on managed cluster might have errors. See the following procedures for Klusterlet degraded conditions that are set to `True`.

[#symptom-klusterlet-is-in-the-degraded-condition]
== Symptom: Klusterlet is in the degraded condition

After deploying a Klusterlet on managed cluster, the `KlusterletRegistrationDegraded` or `KlusterletWorkDegraded`
condition displays a status of _True_.

[#identifying-the-problem-klusterlet-is-in-the-degraded-condition]
== Identifying the problem: Klusterlet agents are in the degraded condition

. Run the following command on the managed cluster to view the Klusterlet status:
+
----
kubectl get klusterlets klusterlet -oyaml
----

. Check the `KlusterletRegistrationDegraded` or `KlusterletWorkDegraded` condition to see if the condition is set to `True`. Procede to _Resolving the problem_ for any degraded conditions.

[#resolving-the-problem-klusterlet-is-in-the-degraded-condition]
== Resolving the problem: Klusterlet is in the degraded condition

. If the `KlusterletRegistrationDegraded` condition with a status of _True_ and the condition reason is: _BootStrapSecretMissing_,
you need create a bootstrap secret on `open-cluster-management-agent` namespace.

. If the `KlusterletRegistrationDegraded` condition with a status of _True_ and the condition reason is: _BootstrapSecretError_,
or _BootstrapSecretUnauthorized_, this means the current bootstrap secret is invalid, you may delete recreate a valid bootstrap
secret on `open-cluster-management-agent` namespace.

. If the `KlusterletRegistrationDegraded` and `KlusterletWorkDegraded` with status of _True_ and the condition reason is
_HubKubeConfigSecretMissing_, you may delete the klusterlet and recreate it.

. If the `KlusterletRegistrationDegraded` and `KlusterletWorkDegraded` with status of _True_ and the condition reason is:
_ClusterNameMissing_, _KubeConfigMissing_, _HubConfigSecretError_, _HubConfigSecretUnauthorized_, you may delete the hub kubeconfig
secret from `open-cluster-management-agent` namespace, if you delete the hub kubeconfig secret, the registration agent will
bootstrap again to get a new hub kubecofnig secret.

. If the `KlusterletRegistrationDegraded` with a status of _True_ and the condition reason is: _GetRegistrationDeploymentFailed_
or _UnavailableRegistrationPod_, you can check the condition message to get the problem details and resolve any problems.

. If the `KlusterletWorkDegraded` with status of _True_ and the condition reason is: _GetWorkDeploymentFailed_ or _UnavailableWorkPod_,
you can check the condition message to get the problem details and resolve any problems.
