[#troubleshooting-]
= Troubleshooting PostgreSQL shared memory error

If you have a high number of applications, you might encounter a PostgreSQL shared memory error that impacts search results and the topology view for applications.
 
[#symptom-cluster-rotating-agents]
== Symptom: PostgreSQL shared memory error

An error message resembling the following appears on the initial search landing page: `Error ERROR: could not resize shared memory segment "/PostgreSQL.1083654800" to 25031264 bytes: No space left on device (SQLSTATE 53100)`

[#resolving-cluster-rotating-agents]
== Resolving the problem: PostgreSQL shared memory error

To resolve the issue, update PostgreSQL resources found in the search PostgreSQL `ConfigMap`. Complete the following steps to update the resources in the 

. Run the following command to switch to the `ocm` project:
+
----
oc project ocm
----

. Run the following command to prevent search from overwriting your changes:
+
----
oc annotate search search-v2-operator search-pause=true
----

. Run the following command to update the resources:
+
----
oc edit cm search-postgres -n ocm
----
+
See the following example for increasing resources:
[source,yaml]
----
  postgresql.conf: |-
    work_mem = '128MB'
    max_parallel_workers_per_gather = '0'
    shared_buffers = '8GB'
----
+
Make sure to save your changes.

. Run the following command to delete the `postgres` and `api` pod.
+
----
oc delete pod search-postgres-xyz search-api-xzy
----

To verify your changes, open the `search-postgres` YAML file and confirm that the changes you made to `postgresql.conf:` are present by running the following command:

----
oc get cm search-postgres -n ocm -o yaml
----