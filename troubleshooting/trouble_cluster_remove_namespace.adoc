[#trouble-cluster-remove-namespace]
= Namespace remains after deleting a cluster

When you remove a managed cluster, the namespace is normally removed as part of the cluster removal process. In rare cases, the namespace remains with some artifacts in it. In that case, you must manually remove the namespace.

[#symptom-trouble-cluster-remove-namespace]
== Symptom: Namespace remains after deleting a cluster

After removing a managed cluster, the namespace is not removed.

[#resolving-trouble-cluster-remove-namespace]
== Resolving the problem: Namespace remains after deleting a cluster

Complete the following steps to remove the namespace manually:

. Run the following command to list the items that remain in the namespace:
+
----
oc api-resources --verbs=list --namespaced -o name \
  | xargs -n 1 oc get --show-kind --ignore-not-found -n <cluster_name>
----
+
Replace __cluster_name__ with the name of the cluster that you attempted to remove.

. Identify and remove all finalizers that remain.

.. Use the `finalizers` metadata attribute to identify all of the finalizers that are in the returned list.

.. Remove each finalizer on the list by entering the following command to edit the list:
+
----
oc edit <resource_name> -n <namespace>
----
+
Replace __resource_name__ with the name of the finalizer.
Replace _namespace_ with the name of the namespace of the finalizer.

.. Delete the finalizers by using the vi editor `dd` command. 

. Check the list for the following types of resources:
  * `kind:secret`
  * `kind:serviceaccount`
  * `kind:managedclusteraddon`
  * `kind:role`
  * `kind:rolebinding`
  * `kind:manifestwork`
  * `kind:lease`
  * `kind:managedclusterinfo`

. Delete any of the resources that do not already show the status of: `Delete`.

. Repeat the steps until all of the finalizers and resources are removed from the namespace. 

. Delete the namespace by entering the following command:
+
----
oc delete ns <cluster-name>
----
+
Replace _cluster-name_ with the name of the cluster that you are trying to delete. 